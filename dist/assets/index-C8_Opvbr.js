(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))d(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&d(n)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function d(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();const l=[{nombre:"Cafe Timbuyacu",precio:23900,img:"./products/timbuyacu.jpg",category:"cafe"},{nombre:"Cafe Guatemala",precio:23900,img:"./products/cafe guatemala.jpg",category:"cafe"},{nombre:"Cafe La Laguna",precio:23900,img:"./products/la laguna.jpeg",category:"te"},{nombre:"Cafe Colombia",precio:23900,img:"./products/cafe colombia.jpg",category:"te"},{nombre:"Cafetera Moka",precio:61e3,img:"./products/Cafetera Moka.jpg",category:"torta"},{nombre:"Cafetera Prensa",precio:32200,img:"./products/prensa.jpg",category:"torta"},{nombre:"Cafetera Sifon",precio:4e4,img:"./products/sifon.jpg",category:"torta"},{nombre:"Cafetera Chemex",precio:58790,img:"./products/chemex.jpg",category:"torta"},{nombre:"Pitcher",precio:21e3,img:"./products/pitcher.jpg",category:"torta"},{nombre:"Stick Art Latte",precio:8550,img:"./products/stick.jpg",category:"torta"},{nombre:"Tamper",precio:15e3,img:"./products/tamper.jpg",category:"torta"},{nombre:"Tamping",precio:25e3,img:"./products/tamping.jpg",category:"torta"}];let s=localStorage.getItem("usuario")||null;const p=document.getElementById("modalLogin"),C=document.getElementById("cerrarLogin"),h=document.getElementById("btnLogin"),v=document.getElementById("usuarioNombre"),E=document.getElementById("btnUsuario");function L(){p.classList.remove("oculto")}C.addEventListener("click",()=>p.classList.add("oculto"));h.addEventListener("click",()=>{const t=v.value.trim();if(!t)return alert("Ingres√° un nombre");s=t,localStorage.setItem("usuario",t),p.classList.add("oculto"),f(),alert(`¬°Bienvenido ${t}!`)});function f(){E.textContent=s?"üë§ "+s:"Iniciar sesi√≥n"}E.addEventListener("click",()=>{s?confirm("¬øCerrar sesi√≥n?")&&(s=null,localStorage.removeItem("usuario"),f()):L()});f();let c=JSON.parse(localStorage.getItem("carrito"))||[];const b=document.querySelector(".products"),I=document.getElementById("carrito"),y=document.getElementById("carritoItems");document.getElementById("totalCarrito");function u(t){b.innerHTML="",t.forEach(e=>{const r=document.createElement("div");r.className="card",r.innerHTML=`
      <img src="${e.img}" width="120">
      <h3>${e.nombre}</h3>
      <p>$${e.precio}</p>
      <button class="add-cart" data-nombre="${e.nombre}" data-precio="${e.precio}" data-img="${e.img}">Agregar al carrito</button>
      <a href="detalle.html?nombre=${encodeURIComponent(e.nombre)}&precio=${e.precio}&img=${encodeURIComponent(e.img)}&category=${e.category}" 
        class="detalle-btn" target="_blank">üîç Ver detalle</a>
    `,b.appendChild(r)}),$()}function $(){document.querySelectorAll(".add-cart").forEach(t=>{t.addEventListener("click",()=>{if(!s){L();return}const e=t.dataset.nombre,r=Number(t.dataset.precio),d=t.dataset.img,o=c.find(a=>a.nombre===e);o?o.cantidad++:c.push({nombre:e,precio:r,img:d,cantidad:1}),m(),i(),I.classList.add("mostrar")})})}function i(){y.innerHTML="";let t=0;c.forEach(n=>{t+=n.precio*n.cantidad;const g=document.createElement("div");g.className="item-carrito",g.innerHTML=`
      <img src="${n.img}" class="img-carrito">
      <div class="info">
        <p>${n.nombre}</p>
        <p>$${n.precio}</p>
        <div class="cant-control">
          <button class="menos" data-nombre="${n.nombre}">-</button>
          <span>${n.cantidad}</span>
          <button class="mas" data-nombre="${n.nombre}">+</button>
        </div>
      </div>
      <button class="eliminar" data-nombre="${n.nombre}">‚úñ</button>
    `,y.appendChild(g)});let e=t,r=0;document.getElementById("subtotalCarrito").textContent="$"+e,document.getElementById("descuentoCarrito").textContent="$"+r,document.getElementById("totalCarrito").textContent="$"+(e-r);let o=3e4-e;const a=document.getElementById("mensajeEnvio");o<=0?a.textContent="¬°TEN√âS ENV√çO GRATIS!":a.textContent=`¬°Faltan $${o} para tu ENV√çO GRATIS!`,S()}function S(){document.querySelectorAll(".mas").forEach(t=>t.addEventListener("click",()=>{const e=c.find(r=>r.nombre===t.dataset.nombre);e.cantidad++,m(),i()})),document.querySelectorAll(".menos").forEach(t=>t.addEventListener("click",()=>{const e=c.find(r=>r.nombre===t.dataset.nombre);e.cantidad>1?e.cantidad--:c=c.filter(r=>r.nombre!==e.nombre),m(),i()})),document.querySelectorAll(".eliminar").forEach(t=>t.addEventListener("click",()=>{c=c.filter(e=>e.nombre!==t.dataset.nombre),m(),i()}))}function m(){localStorage.setItem("carrito",JSON.stringify(c))}u(l);i();const B=window.location.pathname.includes("productos.html");let j=B?l:l.slice(0,4);u(j);i();document.querySelectorAll(".cat-btn").forEach(t=>{t.addEventListener("click",()=>{document.querySelectorAll(".cat-btn").forEach(r=>r.classList.remove("active")),t.classList.add("active");const e=t.dataset.category;u(e==="all"?l:l.filter(r=>r.category===e))})});
